{"version":3,"file":"lock_v2.js","sources":["../../src/concurrency/lock_v2.ts"],"sourcesContent":[null],"names":[],"mappings":"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"}